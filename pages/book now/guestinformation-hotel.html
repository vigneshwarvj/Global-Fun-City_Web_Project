<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <link rel="icon" type="image/x-icon" href="../../assets/images/favicon.png">
        <title>Book Now | Checking details | Global Fun City </title>
        <link rel="stylesheet" href="../../assets/book now css/guestinformation.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter+Tight&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Nanum+Pen+Script&family=Open+Sans:wght@700&family=Poppins:wght@300;500&family=Reem+Kufi&family=Sacramento&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@500&family=Poppins:wght@300;500&family=Rubik+Microbe&display=swap" rel="stylesheet">

        <script src="https://kit.fontawesome.com/1024979679.js" crossorigin="anonymous"></script>

    </head>
<body>



<div class="header">
<a href="../../index.html">
    <img src="../../assets/images/globalfuncitylogo.png" class="header-logo" width="200px" alt="logo">
</a>
<nav class="navbar">
    <ul>
        <li>
            <a class="navigation__link" href="">
                <b>HOME</b>
            </a>
        </li>    
        <li>
            <a class="navigation__link" href="">
                <b>ABOUT</b> 
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>EVENTS </b> 
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>OFFERS </b> 
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>TICKET  PRICES </b>
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>SHOP</b>
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>ATTRACTIONS </b>
            </a> 
        </li>
        <li>
            <a class="navigation__link" href="">
                <b>CONTACT </b> 
            </a> 
        </li>
    </ul>

</nav>
<div>
<button>
<b>
<a href=""> BOOK NOW </b> </button> </a>
</div>
</div>

<div class="background-0">
<div class="book-now">
<h4>Check the details that you entered</h4>
</div>

<div class="background-color" style="height: 727px;">
<!--background color for search-->



<div class="over-2" style="padding: 34px 0px 0px 0px;">
<!-- over -->
<div class="in-out">



<!-- <tr>
<th></th>
<th></th>
</tr>

<tr>
    <td>Email</td>
    <td>123@gmail.com</td>
</tr>
<tr>
<td>Check In</td>
<td>14 Dec 2022</td>
</tr>

<tr>
<td>Check Out</td>
<td>15 Dec 2022</td>
</tr> -->

<!-- <tr>
<td>No.of.nights</td>
<td>1 night</td>
</tr>

<tr>
<td>Room</td>
<td>Deluxe room</td>
</tr> -->

<!-- <tr>
<td>Guests</td>
<td>1 Adult  0 Children</td>
</tr>

<tr>
<td>Ticket</td>
<td>Adult: $90 | Children: $75 (Per head)</td>
</tr>

<!-- <tr>
<td>Room</td>
<td>$800</td>
</tr> -->

<!-- <tr>
<td>Sub Total</td>
<td>$1600</td>
</tr>

<tr>
<td>Grand Total</td>
<td>$1600</td>
</tr>
</table> --> 

 </div>
</div>

<hr>

<div class="terms-and-conditions">
    <h4 class="terms-and-conditions-h4">Terms & Conditions</h4>
    <p class="terms-and-conditions-p">Please read these important terms and conditions for internet booking.</p>
    <h5 class="terms-and-conditions-h5">Wearing a face mask and following other Covid guidelines are mandatory (As per the directions from your local authorities)</h5>
</div>

<div class="instructions-ol">
    <ol>
        <li>Tickets & room once purchased cannot be cancelled, exchanged, or refunded.</li>
        <li>Outside food and beverages are not allowed inside the park.</li>
        <li>Smoking is strictly prohibited inside the park premises.</li>
        <li>If a customer consumes alcohol, they will not be allowed inside the premises and the tickets will not be refunded.</li>
    </ol>
</div>





</div>


<div class="button-for-cancel-accept">
    <button class="btn-cancel" id="cancelButton" type="submit" onclick="CancelDetail()"> <i class="fa-solid fa-arrow-left"></i> Cancel</button> &nbsp;
    <button class="btn-accept" id="btn-accept-ticket" type="submit" onclick="AcceptDetail()">Accept <i class="fa-solid fa-arrow-right"></i></button>
</div>



</div>





<div class="background-footer">

    <div class="navbar-footer-logo">
        <img src="../../assets/images/globalfuncitylogo.png" width="200" alt="logo">
    </div>

    <div class="address">
        <p>11113 W Baldwin RD, Monrovia, MD 21770, USA</p>
        <h4>
            <i class="fa-solid fa-phone"></i> +1 860 817 1080
        </h4>
        <h4>
            <i class="fa-solid fa-envelope"></i> info@globalfuncity.in
        </h4>
    </div>

    <div class="other-policies">
        <a href="#">Book now Policy</a>
    </div>
</div>



<script>

//const reservationDetails = JSON.parse(localStorage.getItem("reservationDetails"));
const bookedDetail = JSON.parse(sessionStorage.getItem("formDetail"));



// On the next page (e.g., guestinformation-hotel.html)

// Retrieve the stored data from localStorage
const storedData = JSON.parse(localStorage.getItem('dataFromrooms'));

let value;
// Check if there is stored data
if (storedData && storedData.length > 0) {
  // Access the stored values
  storedData.forEach(option => {
    const roomName = option.roomName;
    const totalPriceofHotel = option.totalPriceofHotel;
    const beds = option.beds;


    const table = document.createElement("table");

// create table headers
const trHeaders = document.createElement("tr");
const th1 = document.createElement("th");
const th2 = document.createElement("th");
trHeaders.appendChild(th1);
trHeaders.appendChild(th2);
table.appendChild(trHeaders);

// create table rows
const tr1 = document.createElement("tr");
const td1 = document.createElement("td");
td1.className = "important_datas";
td1.textContent = "Email";
const td2 = document.createElement("td");
td2.textContent = bookedDetail["emailAddress"];
tr1.appendChild(td1);
tr1.appendChild(td2);
table.appendChild(tr1);

const tr2 = document.createElement("tr");
const td3 = document.createElement("td");
td3.className = "important_datas";
td3.textContent = "Check In";
const td4 = document.createElement("td");
td4.textContent = bookedDetail["checkInDate"];
tr2.appendChild(td3);
tr2.appendChild(td4);
table.appendChild(tr2);

const tr3 = document.createElement("tr");
const td5 = document.createElement("td");
td5.className = "important_datas";
td5.textContent = "Check Out";
const td6 = document.createElement("td");
td6.textContent = bookedDetail["checkOutDate"];
tr3.appendChild(td5);
tr3.appendChild(td6);
table.appendChild(tr3);

const tr4 = document.createElement("tr");
const td7 = document.createElement("td");
td7.className = "important_datas";
td7.textContent = "Guests";
const td8 = document.createElement("td");
td8.textContent = bookedDetail["adultCount"] + " " + "Adult" + " " + bookedDetail["childrenCount"] + " " +  "Children";
tr4.appendChild(td7);
tr4.appendChild(td8);
table.appendChild(tr4);

const tr41 = document.createElement("tr");
const tr81 = document.createElement("td");
tr81.className = "important_datas";
tr81.textContent = "Room";
const td4181 = document.createElement("td");
td4181.textContent = option.roomName + "(Room Name) " + option.beds + " Beds : " + "$" + option.totalPriceofHotel;
tr41.appendChild(tr81);
tr41.appendChild(td4181);
table.appendChild(tr41);

const tr5 = document.createElement("tr");
const td9 = document.createElement("td");
td9.className = "important_datas";
td9.textContent = "Ticket";
const td10 = document.createElement("td");
td10.textContent = "Adult: $80 | Children: $65 (Per head) / Per Day";
tr5.appendChild(td9);
tr5.appendChild(td10);
table.appendChild(tr5);

const tr6 = document.createElement("tr");
const td11 = document.createElement("td");
td11.className = "important_datas";
td11.textContent = "Sub Total";
const td12 = document.createElement("td");
td12.textContent = '$ ' + bookedDetail["adultTotalPrice"] + "(Adult Price) + " + bookedDetail["childrenTotalPrice"] + "(Children Price) x " + parseInt(bookedDetail["days"])  + " Days " + " + " + parseInt(bookedDetail["nights"]) + " Nights " + " x " + option.totalPriceofHotel + " (Bed Price) " ;
tr6.appendChild(td11);
tr6.appendChild(td12);
table.appendChild(tr6);

const tr7 = document.createElement("tr");
const td13 = document.createElement("td");
td13.className = "important_datas";
td13.textContent = "Grand Total";
const td14 = document.createElement("td");
//To give to variable name to subtotal
// const first_amount = parseInt(bookedDetail["adultTotalPrice"])+ parseInt(bookedDetail["childrenTotalPrice"]) * parseInt(bookedDetail["nights"]);
// const second_amount = option.totalPriceofHotel * parseInt(bookedDetail["days"]);

const first_amount = parseInt(bookedDetail["adultTotalPrice"])+ parseInt(bookedDetail["childrenTotalPrice"]) * parseInt(bookedDetail["days"]);
const second_amount = option.totalPriceofHotel * parseInt(bookedDetail["nights"]);

console.log(first_amount);
console.log(second_amount);
td14.textContent = "$ " + (first_amount+second_amount);
value = (first_amount+second_amount);
tr7.appendChild(td13);
tr7.appendChild(td14);
table.appendChild(tr7);

document.querySelector("div.in-out").append(table);
    //console.log(roomName, totalPriceofHotel, beds);
  });
} else {
  // No stored data or empty array
  console.log('No stored data found');
}



//for(let i = 0; i < 1; i++){
// create table element


// // Get the Cancel button element
// const cancelButton = document.getElementById('cancelButton');

// // Add event listener to the Cancel button
// cancelButton.addEventListener('click', function() {
//   // Remove bookedDetail, totalPriceRoom, and totalBed from sessionStorage
//   sessionStorage.removeItem('bookedDetail');
//   sessionStorage.removeItem('totalHotelPrice');
//   sessionStorage.removeItem('beds');

//   // Remove bookingData from localStorage (assuming it was stored as "bookingData")
//   localStorage.removeItem('bookingData');
// alert("Are you sure to cancel your bookings?");
//   // Redirect to the desired page
//   window.location.href = "../../pages/other pages/booknow.html";
// });

function CancelDetail() {
  const arraySession = JSON.parse(sessionStorage.getItem("formDetail"));
  const gettingArrayLocal = JSON.parse(localStorage.getItem("reservationDetails"));

  for (let i = 0; i < gettingArrayLocal.length; i++) {
    if (gettingArrayLocal[i].reservationUniqueId === arraySession.reservationUniqueId) {
      gettingArrayLocal.splice(i, 1);
      sessionStorage.removeItem("formDetail");
      localStorage.setItem("reservationDetails", JSON.stringify(gettingArrayLocal));

      //sessionStorage.removeItem('bookedDetail');
  sessionStorage.removeItem('totalHotelPrice');
  sessionStorage.removeItem('beds');

  // Remove bookingData from localStorage (assuming it was stored as "bookingData")
  localStorage.removeItem('bookingData');

      alert("Are you sure to cancel your booking?");
      break;
    }
  }
  window.location.href = "../../pages/other pages/booknow.html";
}

function AcceptDetail() {

let bookingsConfirm = JSON.parse(localStorage.getItem("bookingsConfirmFromTheUserInHotel")) || [];
bookedDetail["totalPriceFromtheUserInBooking"] = value;

let hotelData = JSON.parse(localStorage.getItem("dataFromrooms")) || [];
localStorage.setItem("dataFromroomsUser" , JSON.stringify(hotelData));

// Add the current booking to the array
bookingsConfirm.push(bookedDetail);

// Save the updated array to local storage
localStorage.setItem("bookingsConfirmFromTheUserInHotel", JSON.stringify(bookingsConfirm));

alert("Your Ticket and Room has been booked. Enjoy!")
window.location.href = "../../pages/book now/final-book-now.html";
}

</script>

</body>
</html>