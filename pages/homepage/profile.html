<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="UTF-8">
        <link rel="icon" type="image/x-icon" href="./assets/images/favicon.png">

        <title> Global Fun City </title>
        <link rel="stylesheet" href="../../assets/homepage css/profile.css">
        <link rel="stylesheet" href="../../assets/homepage_css/footer_gfc.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter+Tight&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Nanum+Pen+Script&family=Open+Sans:wght@700&family=Poppins:wght@300;500&family=Reem+Kufi&family=Sacramento&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@500&family=Poppins:wght@300;500&family=Rubik+Microbe&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    </head>
    <body>



        <div class="header">
            <a href="../../index.html">
                <img src="../../assets/images/globalfuncitylogo.png" class="header-logo" width="200px" alt="logo">
            </a>
            <nav class="navbar">
                <ul>
                    <li>
                        <a class="navigation__link" href="../../index.html">
                            <b>HOME</b>
                        </a>
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/home.html">
                            <b>ABOUT</b> 
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/events.html">
                            <b>EVENTS </b> 
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/offer.html">
                            <b>OFFERS </b> 
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/ticketprices.html">
                            <b>TICKET  PRICES </b>
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/shop/shop.html">
                            <b>SHOP</b>
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/attractions.html">
                            <b>ATTRACTIONS </b>
                        </a> 
                    </li>
                    <li>
                        <a class="navigation__link" href="../../pages/other pages/contact.html">
                            <b>CONTACT </b> 
                        </a> 
                    </li>
         
                </ul>
    
            </nav>
            <div>
                <a href="../../pages/other pages/booknow.html">
                    <button class="btn-book-now">
                        <b>BOOK NOW </b> 
                    </button>
                </a>
            </div>
        </div>
        <div class="total-homepages-div"> 
            <!-- Total Homepage div -->
        <div class="homepages">
            <a href="../../index.html">Home <i class="fa-light fa-greater-than" style="color: #655b5b;"></i></a>
        </div> &nbsp;
        <div class="homepages">
            <a href="../../pages/homepage/main.profile.html">Account <i class="fa-light fa-greater-than" style="color: #655b5b;"></i></a>
        </div> &nbsp;
        <div class="homepages">
            <a href="../../pages/homepage/profile.html">Account Settings </a>
        </div> 

        </div>
        <!-- Completing Div -->

        <div class="all-content">

            <div class="account-information">

                <div class="account">
                    <h1>Your Account</h1>
                </div>   

                <div class="profile">
                    <form>
                        <label class="input-field">Email</label>
                        <br>
                        <input id="email" class="input-field" type="email" disabled>
                    </form>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">Mobile Phone (optional)</label>
                        <br>
                        <input id="mobile_number" class="input-field" type="tel" placeholder="+1" oninput="this.value = this.value.replace(/[^0-9]/g,'')" minlength="10" maxlength="10" readonly>
                    </form>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">Password</label>
                        <br>
                        <input id="password" class="input-field" type="password" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&amp;*_=+-]).{8,24}$" maxlength="10" minlength="8" 
                            title="Please give one uppercase, one lowercase, one special character and one number miniumum is 8 character maximum is 10 characters" disabled>
                    </form>
                </div>

                <div class="personal-info">
                    <h3>Personal Information</h3>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">First Name</label>
                        <br>
                        <input id="first_name" class="input-field" type="text" pattern="[a-zA-Z]+" readonly>
                    </form>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">Middle Name (optional)</label>
                        <br>
                        <input id="middle_name" class="input-field" type="text" pattern="[a-zA-Z]+" readonly>
                    </form>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">Last Name</label>
                        <br>
                        <input id="last_name" class="input-field" type="text" pattern="[a-zA-Z]+" readonly>
                    </form>
                </div>

                <div class="profile">
                    <form>
                        <label class="input-field">Home Phone (optional)</label>
                        <br>
                        <input id="home_mobile_number" class="input-field" type="tel" oninput="this.value = this.value.replace(/[^0-9]/g,'')" minlength="10" maxlength="10" readonly>
                    </form>
                </div>

                <br>
                <div class="btn-edit">
                    <button type="submit" class="btn-1" id="edit-button">Edit</button> 
                </div>
                <br>
                <div class="btn-done">
                    <button class="btn-2" id="done-button" style="display: none;">Done</button>
                </div>

                <div class="privacy">
                    <p>
                        Global treats this information with care and respect. For details, review our <a href="../../pages/footer other pages/privacypolicy.html"> Privacy Policy. </a>
                    </p>
                </div>

                <div class="btn-delete">
                    <button type="button" onclick="deleteAcc()"> Delete account </button>
                    <p>By deleting your account, you may be unable to access certain Global services.</p>
                </div>
            </div>

            <div class="profile-picture">
                <form action="" method="post" enctype="multipart/form-data">
                    <label for="fileToUpload">
                        <div class="profile-pic">
                            <span class="glyphicon glyphicon-camera"></span>
                            <span>Change Image</span>
                        </div>
                    </label>
                    <input type="File" name="fileToUpload" id="fileToUpload" onchange="loadFile(event)"> 
                </form>

            </div>

        </div>

        <footer class="footer_for_gfc">

        </footer>

        <script>
// js for change image
const loadFile = function (event) {
  const image = document.getElementById("output");
  image.src = URL.createObjectURL(event.target.files[0]);
};
// chnge image complete

//get value from local storage
const unique_id = JSON.parse(localStorage.getItem("unique_id"));
const user_list = JSON.parse(localStorage.getItem("user_list"));
// console.log(userData);
function profile_data(e) {
  return e.email == unique_id;
}
person_data = user_list.find(profile_data);

document.getElementById("first_name").value = person_data.first_name;
document.getElementById("middle_name").value = person_data.middle_name;
document.getElementById("last_name").value = person_data.last_name;
document.getElementById("email").value = person_data.email;
document.getElementById("password").value = person_data.password;
document.getElementById("home_mobile_number").value =
  person_data.home_mobile_number;
document.getElementById("mobile_number").value = person_data.mobile_number;

// document.getElementById("date").value = person_data["date"];

// update_version
function update_version(e) {
  const user_firstname = document.getElementById("first_name").value;
  const user_middlename = document.getElementById("middle_name").value;
  const user_lastname = document.getElementById("last_name").value;
  const user_password = document.getElementById("password").value;
  // let user_date = document.getElementById("date").value;
  const user_mobilenumber = document.getElementById("mobile_number").value;
  const user_home_mobilenumber =
    document.getElementById("home_mobile_number").value;

  person_data.first_name = user_firstname;
  person_data.middle_name = user_middlename;
  person_data.last_name = user_lastname;
  person_data.password = user_password;
  // person_data["date"] = user_date;
  person_data.mobile_number = user_mobilenumber;
  person_data.home_mobile_number = user_home_mobilenumber;

  // let user = document.getElementById("mobile-number").value =  person_data["mobile_number"]

  localStorage.setItem("user_list", JSON.stringify(user_list));
  console.log(user_list);

  // window.location.href = "../../pages/homepage/profile.html"
}

// edit started

const editThing = document.querySelector(".btn-1");
editThing.addEventListener("click", findReadonly);

const sumbit = document.querySelector(".btn-2");
sumbit.addEventListener("click", update_version);
sumbit.addEventListener("click", findReadonly1);

function findReadonly(e) {
  document.getElementById("first_name").removeAttribute("readonly");
  document.getElementById("middle_name").removeAttribute("readonly");
  document.getElementById("last_name").removeAttribute("readonly");
  // document.getElementById("date").removeAttribute("readonly");
  document.getElementById("password").removeAttribute("readonly");
  document.getElementById("mobile_number").removeAttribute("readonly");
  document.getElementById("home_mobile_number").removeAttribute("readonly");
  document.querySelector(".btn-2").removeAttribute("style");
  document.querySelector(".btn-1").setAttribute("style", "display:none");
}

function findReadonly1(e) {
  document.getElementById("first_name").setAttribute("readonly", "true");
  document.getElementById("middle_name").setAttribute("readonly", "true");
  document.getElementById("last_name").setAttribute("readonly", "true");
  // document.getElementById("date").setAttribute("readonly", "true");
  document.getElementById("password").setAttribute("readonly", "true");
  document.getElementById("mobile_number").setAttribute("readonly", "true");
  document
    .getElementById("home_mobile_number")
    .setAttribute("readonly", "true");
  document.querySelector(".btn-2").setAttribute("style", "display:none");
  document.querySelector(".btn-1").removeAttribute("style");
}

// edit completed

// delete account started
// function deleteAcc(e)
//     {
//         if(confirm("Are you sure to delete your account?")){
//         //get value from local storage
//         let unique_id = JSON.parse(localStorage.getItem("unique_id"));
//         let user_list= JSON.parse(localStorage.getItem("user_list"));
//     function profile_data(e){
//         return e.mobile == unique_id  ;
//     }
//      // finding the userData which unique_id correctly matches
//     person_data = user_list.find(profile_data);
//         const indexOfUser = user_list.indexOf(person_data);
//         // console.log(result);
//         // user_list.splice(position(which means index 1,2,3,4), counting);
//         user_list.splice(indexOfUser, 1);
//         localStorage.setItem("user_list", JSON.stringify(user_list));
//         window.location.href="../../index.html";
//     };
// }

function deleteAcc(e) {
  if (confirm("Are you sure to delete your account?")) {
    //get value from local storage
    const unique_id = JSON.parse(localStorage.getItem("unique_id"));
    const user_list = JSON.parse(localStorage.getItem("user_list"));

    // finding the userData which unique_id correctly matches
    function profile_data(e) {
      return e.mobile == unique_id;
    }
    person_data = user_list.find(profile_data);

    const indexOfUser = user_list.indexOf(person_data);

    // remove the user data from the user_list array
    user_list.splice(indexOfUser, 1);

    // update the user_list in local storage
    localStorage.setItem("user_list", JSON.stringify(user_list));

    // redirect to the main page
    window.location.href = "../../index.html";
  }
}

// delete finish
</script>

<script src="../../js/header.js"></script>
<script src="../../js/footer-gfc.js"></script>

</body>
</html>